$(document).ready(function () {
  setTimeout(function () {
    $("html").removeClass("is-loading"),
      $("#loading").fadeOut(),
      AOS.init({
        once: !0,
      });
  }, 1e3),
    $("formInvestment2").validate({
      rules: {
        fullName: {
          required: !0,
        },
        phoneNumber: {
          required: !0,
          number: !0,
        },
        email: {
          required: !0,
          email: !0,
        },
        lookingToInvest: {
          required: !0,
        },
        investmentTerm: {
          required: !0,
        },
        investmentAmount: {
          required: !0,
        },
        preferredTime: {
          required: !0,
        },
        agree: {
          required: !0,
        },
      },
    }),
    $(document).on("click", ".scroll-to", function (e) {
      var t = $(this).attr("href");
      $("html, body").animate({
        scrollTop: $(t).offset().top,
      }),
        e.preventDefault();
    }),
    $(document).on("click", ".checkAgreement", function () {
      var e = $(this).parents(".form");
      1 == $(this).prop("checked")
        ? $(e).find('input[type="submit"]').attr("disabled", !1)
        : $(e).find('input[type="submit"]').attr("disabled", !0);
    });
});

// IP address detector

//Form 1

const ipFormInput = document.getElementById("ipFormInput");

fetch("https://api.ipify.org?format=json")
  .then((response) => {
    return response.json();
  })
  .then((json) => {
    const ip = json.ip;
    ipFormInput.value = ip;
    console.log(ip);
  })
  .catch((err) => {
    console.error(`Error getting IP Address: ${err}`);
  });

//Form 2
const ipFormInput2 = document.getElementById("ipFormInput2");

fetch("https://api.ipify.org?format=json")
  .then((response) => {
    return response.json();
  })
  .then((json) => {
    const ip2 = json.ip;
    ipFormInput2.value = ip2;
    console.log(ip);
  })
  .catch((err) => {
    console.error(`Error getting IP Address: ${err}`);
  });

// <!-- DATA VALIDATION SCRIPT -->

// <!--FORM 1 #formInvestment2-->

const phoneInputField = document.querySelector("#phone");
const code = document.querySelector("#country_code");
const form = document.getElementById("formInvestment2");

function process(event) {
  event.preventDefault();

  const codeValue = code.value;

  const phoneNumber = codeValue + phoneInputField.value;

  const data = new URLSearchParams();
  data.append("phone", phoneNumber);

  fetch("https://intl-tel-input-6596.twil.io/lookup", {
    method: "POST",
    body: data,
  })
    .then((response) => response.json())
    .then((json) => {
      if (json.success) {
        phoneInputField.classList.remove("red");
        phoneInputField.classList.add("green");
        form.classList.add("phone-good");

        if (
          form.classList.contains("phone-good") &&
          form.classList.contains("email-good")
        ) {
          document.getElementById("submit").disabled = false;
        }
      } else {
        document.getElementById("submit").disabled = true;
        console.log(json.error);

        form.classList.remove("phone-good");
        phoneInputField.classList.remove("green");
        phoneInputField.classList.add("red");
      }
    })
    .catch((err) => {
      console.log(`Something went wrong: ${err}`);
    });
}
// <!--FORM 2 #formInvestment-->

const phoneInputField2 = document.querySelector("#phone2");
const code2 = document.querySelector("#country_code2");
const form2 = document.getElementById("formInvestment");

function process2(event) {
  event.preventDefault();

  const codeValue2 = code2.value;

  const phoneNumber2 = codeValue2 + phoneInputField2.value;

  const data = new URLSearchParams();
  data.append("phone", phoneNumber2);

  fetch("https://intl-tel-input-6596.twil.io/lookup", {
    method: "POST",
    body: data,
  })
    .then((response) => response.json())
    .then((json) => {
      if (json.success) {
        phoneInputField2.classList.remove("red");
        phoneInputField2.classList.add("green");
        form2.classList.add("phone-good");

        if (
          form2.classList.contains("phone-good") &&
          form2.classList.contains("email-good")
        ) {
          document.getElementById("submit2").disabled = false;
        }
      } else {
        document.getElementById("submit2").disabled = true;
        console.log(json.error);

        form2.classList.remove("phone-good");
        phoneInputField2.classList.remove("green");
        phoneInputField2.classList.add("red");
      }
    })
    .catch((err) => {
      console.log(`Something went wrong: ${err}`);
    });
}

/* <!-- DATA VALIDATION SCRIPT END --> */
